<!DOCTYPE html>
<html lang="en"><head>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting-1fe81d0376b2c50856e68e651e390326.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.23">

  <meta name="author" content="Juan F. Imbet">
  <title>Asset Pricing Theory – Asset Pricing Theory - Binary Trees and Consumption Based Asset Pricing</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="../../../../site_libs/revealjs/dist/theme/quarto-534cd8e3a96973385dffff3f4709048d.css">
  <link rel="stylesheet" href="../../../../src/assets/styles.css">
  <link rel="stylesheet" href="../../../assets/styles.css">
  <link href="../../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section class="quarto-title-block center">
  <h1 class="title">Asset Pricing Theory - Binary Trees and Consumption Based Asset Pricing</h1>
  <p class="subtitle">Asset Pricing Theory</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Juan F. Imbet 
</div>
        <p class="quarto-title-affiliation">
            Paris Dauphine University-PSL
          </p>
    </div>
</div>

</section>
<section class="slide level0">

<h2>Binary Trees</h2>
<p>Consider the following economy.</p>
<ul>
<li>Two periods, today and tomorrow, and two states of nature (up <strong>u</strong>, down <strong>d</strong>).</li>
<li>One risky asset (stock) and one riskless asset (bond).</li>
<li>The price of the stock today is <span class="math inline">\(S\)</span>; the bond price today is <span class="math inline">\(1\)</span>.</li>
<li>The risk-free bond pays <span class="math inline">\(1+r_f\)</span> tomorrow in every state.</li>
<li>The stock pays <span class="math inline">\(uS\)</span> in state <strong>u</strong> and <span class="math inline">\(dS\)</span> in state <strong>d</strong>, with <span class="math inline">\(u&gt;d&gt;0\)</span>.</li>
<li>The (physical) probabilities are <span class="math inline">\(\mathbb P(u)=\pi\)</span> and <span class="math inline">\(\mathbb P(d)=1-\pi\)</span>.</li>
</ul>
<p><strong>No-Arbitrage (NA) feasibility region:</strong> <span class="math inline">\(d &lt; 1+r_f &lt; u\)</span>.</p>
</section>
<section class="slide level0">

<h2>No-Arbitrage Pricing by Replication</h2>
<p>Let <span class="math inline">\(X\)</span> be any asset with payoffs <span class="math inline">\(X_u\)</span> (state <strong>u</strong>) and <span class="math inline">\(X_d\)</span> (state <strong>d</strong>). - What is its price today, <span class="math inline">\(p\)</span>? - Replicate its payoffs with <span class="math inline">\(b\)</span> units of the bond and <span class="math inline">\(\theta\)</span> of the stock.</p>
<p><strong>Payoffs of the replicating portfolio:</strong> <span class="math display">\[
\begin{aligned}
    \text{state }u: &amp;\quad b(1+r_f) + \theta\,uS \\
    \text{state }d: &amp;\quad b(1+r_f) + \theta\,dS
\end{aligned}
\]</span> Match payoffs: <span class="math display">\[
\begin{aligned}
b(1+r_f) + \theta\,uS &amp;= X_u,\\
b(1+r_f) + \theta\,dS &amp;= X_d.
\end{aligned}
\]</span></p>
</section>
<section class="slide level0">

<h2>Solving for the Replicating Weights</h2>
<p>Subtract the two equations: <span class="math display">\[
    \theta (u-d)S = X_u - X_d
\quad\Longrightarrow\quad
\boxed{\;\theta = \dfrac{X_u - X_d}{(u-d)S}\;}
\]</span></p>
<p>Back-out the bond position (use, e.g., the <strong>u</strong> equation): <span class="math display">\[
\boxed{\;b
= \frac{X_u - \theta\,uS}{1+r_f}
= \frac{u X_d - d X_u}{(u-d)(1+r_f)}\;}
\]</span></p>
<p><strong>Price today</strong> (cost of the replicating portfolio): <span class="math display">\[
\begin{aligned}
p &amp;= b + \theta S \\
&amp;= \frac{u X_d - d X_u}{(u-d)(1+r_f)} \;+\; \frac{X_u - X_d}{u-d} \\
&amp;= \frac{(1+r_f - d) X_u + (u - (1+r_f)) X_d}{(u-d)(1+r_f)} \\
&amp;= \frac{1}{1+r_f} \Big[ \frac{1+r_f -d}{u-d} X_u + \frac{u - (1+r_f)}{u-d} X_d \Big]\\
&amp;= \frac{1}{1+r_f} \big[ \tilde{q} X_u + (1-\tilde{q}) X_d \big] \\
&amp;= \frac{1}{1+r_f}\mathbb{E}^Q\Big[X\Big]
\end{aligned}
\]</span></p>
</section>
<section class="slide level0">

<h2>Arrow-Debreu Securities</h2>
<ul>
<li>Price of an asset that pays 1 in state <strong>u</strong> and 0 in state <strong>d</strong>: <span class="math display">\[
\begin{aligned}
q_u = \frac{(1+r_f) - d}{(u - d)(1+r_f)} \\
q_d = \frac{u - (1+r_f)}{(u - d)(1+r_f)}
\end{aligned}
\]</span></li>
</ul>
<p>Price of a bond is <span class="math inline">\((1+r_f)\)</span> times the sum of the prices of the Arrow-Debreu securities: <span class="math display">\[
  (q_u + q_d)(1+r_f) = 1
\]</span></p>
<h2>The S.D.F.</h2>
<ul>
<li>Start with the linear pricing formula: <span class="math display">\[
p = \frac{1}{1+r_f} \big[ \tilde{q} X_u + (1-\tilde{q}) X_d \big]
\]</span></li>
<li>Multiply and divide by their respective probabilities (<span class="math inline">\(\pi\)</span> and <span class="math inline">\(1-\pi\)</span>): <span class="math display">\[
\begin{aligned}
p &amp;= \frac{1}{1+r_f} \big[ \tilde{q} X_u + (1-\tilde{q}) X_d \big] \\
  &amp;= \mathbb{E}\Big[\frac{1}{1+r_f}\Big(\frac{\tilde{q}}{\pi} X_u + \frac{1-\tilde{q}}{1-\pi} X_d\Big)\Big] = \mathbb{E}[M X]
\end{aligned}
\]</span></li>
</ul>
</section>
<section class="slide level0">

<h2>Consumption Based Asset Pricing</h2>
<ul>
<li>So far we have proved the existence and some conditions on <span class="math inline">\(M\)</span>, but what does it capture?</li>
<li>We will get some insights by understanding how investors make investment decisions to smooth consumption.</li>
<li>Consider an investor with initial wealth <span class="math inline">\(W_0\)</span> who invests in a risk-free bond and a risky stock.</li>
<li>The investor has Von Neumann-Morgenstern preferences over consumption at <span class="math inline">\(t=0\)</span> and <span class="math inline">\(t=1\)</span>:</li>
</ul>
<h2>Von Neumann-Morgenstern preferences</h2>
<ul>
<li>Preferences over lotteries are complete, transitive, continuous and independent (Axioms of choice).</li>
<li>These preferences can be represented by computing expectations of an utility function <span class="math inline">\(u(x)\)</span> on wealth (or consumption).</li>
<li>The utility function is unique up to positive affine transformations.</li>
</ul>
<h2>Setup</h2>
<ul>
<li>The risky asset has price <span class="math inline">\(p\)</span> today and pays <span class="math inline">\(X\)</span> tomorrow.</li>
<li>The risk free rate is <span class="math inline">\(r_f\)</span>.</li>
<li>Today the investor chooses how many units <span class="math inline">\(\theta\)</span> of the risky asset to buy and how many units <span class="math inline">\(b\)</span> of the risk free bond to buy.</li>
</ul>
</section>
<section class="slide level0">

<h2>Investor’s problem</h2>
<ul>
<li>The investor consumes today <span class="math inline">\(C_0 = W_0 - p\theta - b\)</span>, and consumes tomorrow <span class="math inline">\(C_1 = (1+r_f)b + \theta X\)</span> which is a random variable.</li>
<li>The investor maximizes expected utility: <span class="math display">\[
\max_{\theta,b} u(C_0) + \beta \mathbb{E}[u(C_1)]
\]</span> subject to the budget constraint (<span class="math inline">\(C_0\)</span> and <span class="math inline">\(C_1\)</span> defined above).</li>
<li>Replace the constraints in the objective function to make it unconstrained: <span class="math display">\[
\max_{\theta,b} u(W_0 - p\theta - b) + \beta \mathbb{E}[u((1+r_f)b + \theta X)]
\]</span></li>
<li>The first order conditions are: <span class="math display">\[
\begin{aligned}
\frac{\partial \mathcal{L}}{\partial b} &amp;= -u'(C_0) + \beta (1+r_f) \mathbb{E}[u'(C_1)] = 0 \\
\frac{\partial \mathcal{L}}{\partial \theta} &amp;= -p u'(C_0) + \beta \mathbb{E}[X u'(C_1)] = 0
\end{aligned}
\]</span></li>
<li>Solve for <span class="math inline">\(p\)</span> <span class="math display">\[
p =  \mathbb{E}[\beta \frac{u'(C_1)}{u'(C_0)} X]
\]</span></li>
</ul>
</section>
<section class="slide level0">

<h2>Interpretation of the S.D.F.</h2>
<ul>
<li>In this setup, the S.D.F. is the intertemporal marginal rate of substitution of consumption.</li>
<li>The S.D.F. is high when consumption tomorrow is low (i.e., <span class="math inline">\(u'(C_1)\)</span> is high) relative to consumption today (i.e., <span class="math inline">\(u'(C_0)\)</span> is low).</li>
<li>The S.D.F. is low when consumption tomorrow is high (i.e., <span class="math inline">\(u'(C_1)\)</span> is low) relative to consumption today (i.e., <span class="math inline">\(u'(C_0)\)</span> is high).</li>
<li>Investors are willing to pay more for assets that pay off in bad times (when consumption is low) and less for assets that pay off in good times (when consumption is high).</li>
<li>Partial Equilibrium view: Aggregate Consumption is given exogenously and investors optimize their portfolios given their consumption paths.</li>
<li>General Equilibrium view: Asset prices and consumption are determined simultaneously. Investors choose their consumption and investment plans to maximize their utility subject to their budget constraints and the market clearing conditions.</li>
</ul>
</section>
<section class="slide level0">

<h2>Some useful tools</h2>
<ul>
<li>CARA (exponential utility) is very tractable with normal asset payoffs.</li>
<li>If <span class="math inline">\(u(X) = -e^{-\gamma X}\)</span> and <span class="math inline">\(X \sim \mathcal{N}(\mu, \sigma^2)\)</span>, then <span class="math display">\[
\mathbb{E}[u(X)] = -\exp\left(-\gamma \mu + \frac{1}{2} \gamma^2 \sigma^2\right)
\]</span></li>
<li>This identity can be proven using the moment generating function and the certain equivalent interpretation of CARA utility.</li>
</ul>
</section>
<section class="slide level0">

<h2>Continuous-States (1-period) CARA–Normal</h2>
<h3>Setup</h3>
<ul>
<li>Preferences (CARA): <span class="math inline">\(u(C) = -e^{-\gamma C}\)</span>, <span class="math inline">\(\gamma&gt;0\)</span>.</li>
<li>Today’s consumption: <span class="math inline">\(C_0 = W_0 - p\,\theta - b\)</span>.</li>
<li>Tomorrow’s consumption: <span class="math inline">\(C_1 = (1+r_f)\,b + \theta X\)</span>, with <span class="math inline">\(X \sim \mathcal N(\mu,\sigma^2)\)</span>.</li>
<li>Objective: <span class="math display">\[
\max_{\theta,b}\; -e^{-\gamma (W_0 - p\theta - b)} \;+\; \beta\,\mathbb E\!\left[-e^{-\gamma\big((1+r_f)b+\theta X\big)}\right].
\]</span></li>
</ul>
<p>Using normality of <span class="math inline">\(X\)</span> and CARA (certainty-equivalent for the second term): <span class="math display">\[
\mathbb E\!\left[-e^{-\gamma\big((1+r_f)b+\theta X\big)}\right]
= -\exp\!\left(-\gamma\big((1+r_f)b+\theta\mu\big) + \tfrac12 \gamma^2 \theta^2\sigma^2\right).
\]</span></p>
<p>Define <span class="math display">\[
\Phi(b,\theta) \equiv -e^{-\gamma (W_0 - p\theta - b)}
\;-\;\beta\,\exp\!\left(-\gamma\big((1+r_f)b+\theta\mu\big) + \tfrac12 \gamma^2 \theta^2\sigma^2\right).
\]</span></p>
</section>
<section class="slide level0">

<h2>First-order conditions</h2>
<ol type="1">
<li><p>FOC in <span class="math inline">\(b\)</span>: <span class="math display">\[
\frac{\partial \Phi}{\partial b}
= -\gamma e^{-\gamma (W_0 - p\theta - b)}
\;+\;\beta\,\gamma(1+r_f)\,e^{-\gamma\big((1+r_f)b+\theta\mu\big) + \tfrac12 \gamma^2 \theta^2\sigma^2}
=0.
\]</span> Hence <span class="math display">\[
e^{-\gamma (W_0 - p\theta - b)}
= \beta(1+r_f)\,e^{-\gamma\big((1+r_f)b+\theta\mu\big) + \tfrac12 \gamma^2 \theta^2\sigma^2}.
\]</span></p></li>
<li><p>FOC in <span class="math inline">\(\theta\)</span>: <span class="math display">\[
\frac{\partial \Phi}{\partial \theta}
= -\gamma p\,e^{-\gamma (W_0 - p\theta - b)}
\;+\;\beta\,e^{-\gamma\big((1+r_f)b+\theta\mu\big) + \tfrac12 \gamma^2 \theta^2\sigma^2}
\big(\gamma\mu - \gamma^2 \theta \sigma^2\big)
=0.
\]</span></p></li>
</ol>
<p>Use FOC-<span class="math inline">\(b\)</span> to eliminate the exponential terms: <span class="math display">\[
-\gamma p \cdot \big[\beta(1+r_f)\,e^{-\gamma(\cdots)}\big]
+ \beta\,e^{-\gamma(\cdots)}\big(\gamma\mu - \gamma^2 \theta \sigma^2\big)=0,
\]</span> so (divide by <span class="math inline">\(\beta e^{-\gamma(\cdots)}\gamma&gt;0\)</span>): <span class="math display">\[
-\,p(1+r_f) + \mu - \gamma\theta\sigma^2 = 0.
\]</span></p>
</section>
<section class="slide level0">

<h2>Demand and Price</h2>
<ul>
<li><p><strong>Optimal risky demand (given price <span class="math inline">\(p\)</span>)</strong>: <span class="math display">\[
\boxed{\;\theta^*(p) \;=\; \frac{\mu - (1+r_f)\,p}{\gamma\,\sigma^2}\; }.
\]</span></p></li>
<li><p><strong>Equilibrium price with outside supply <span class="math inline">\(\bar\theta\)</span></strong> (market clearing <span class="math inline">\(\theta^*=\bar\theta\)</span>): <span class="math display">\[
\boxed{\;p \;=\; \frac{\mu - \gamma\,\bar\theta\,\sigma^2}{\,1+r_f\,}\; }.
\]</span></p></li>
<li><p><strong>Partial-equilibrium “mean–variance” pricing identity</strong> (from the FOC directly): <span class="math display">\[
\boxed{\;p \;=\; \frac{\mu - \gamma\,\theta^*\,\sigma^2}{\,1+r_f\,}\;}
\quad\Longleftrightarrow\quad
(1+r_f)\,p \;=\; \mu \;-\; \gamma\,\theta^*\,\sigma^2.
\]</span></p></li>
</ul>
<blockquote>
<p>Interpretation: price equals discounted mean payoff minus a <strong>risk discount</strong> proportional to risk aversion <span class="math inline">\(\gamma\)</span>, position size <span class="math inline">\(\theta^*\)</span>, and variance <span class="math inline">\(\sigma^2\)</span>.</p>
</blockquote>
</section>
<section class="slide level0">

<h2>Log-Linearization as a Toolbox</h2>
<p>We often need to connect expected returns with properties of the SDF.</p>
<ul>
<li>Fundamental pricing: <span class="math inline">\(\;1 = \mathbb E[M R]\,\)</span> for any gross return <span class="math inline">\(R\)</span>.</li>
<li>Covariance decomposition: <span class="math inline">\(\;\mathbb E[M] \mathbb E[R] + \operatorname{Cov}(M,R) = 1\,\)</span> so <span class="math display">\[
\boxed{\;\mathbb E[R] = R_f \;-\; \frac{\operatorname{Cov}(M,R)}{\mathbb E[M]}\;}\quad\text{with}\quad R_f = \frac{1}{\mathbb E[M]}.
\]</span> Risk premia are negative multiples of <span class="math inline">\(\operatorname{Cov}(M,R)\)</span>.</li>
</ul>
</section>
<section class="slide level0">

<h3>Lognormal/log-linear relations</h3>
<p>Let <span class="math inline">\(x=\log M\)</span> and <span class="math inline">\(r=\log R\)</span>. If <span class="math inline">\((x+r)\)</span> is (approximately) normal, then <span class="math display">\[
1 = \mathbb E[M R] = \mathbb E\big[e^{x+r}\big] = \exp\Big(\mathbb E[x+r] + \tfrac12\operatorname{Var}(x+r)\Big),
\]</span> which implies <span class="math display">\[
\boxed{\;\mathbb E[r] = -\mathbb E[x] - \tfrac12\operatorname{Var}(x+r)\;}
\;=\; -\mathbb E[\log M] - \tfrac12\Big(\operatorname{Var}(\log M) + \operatorname{Var}(\log R) + 2\operatorname{Cov}(\log M,\log R)\Big).
\]</span></p>
<p>For the risk-free rate, using <span class="math inline">\(1=\mathbb E[M R_f] = R_f\,\mathbb E[M]\)</span> and (approximate) lognormal <span class="math inline">\(M\)</span>: <span class="math display">\[
\boxed{\;\log R_f = -\log\mathbb E[M] \approx -\mathbb E[\log M] - \tfrac12\operatorname{Var}(\log M)\; }.
\]</span> Approximation detail: letting <span class="math inline">\(y\equiv \log M\)</span> and <span class="math inline">\(K_y(t)\equiv \log\mathbb E[e^{t y}]\)</span> be the cumulant generating function, a second-order truncation gives <span class="math inline">\(K_y(1) \approx \mathbb E[y] + \tfrac12\operatorname{Var}(y)\)</span> (exact if <span class="math inline">\(y\)</span> is normal). Hence <span class="math inline">\(\log R_f = -K_y(1) \approx -\mathbb E[\log M] - \tfrac12\operatorname{Var}(\log M)\)</span>.</p>
</section>
<section class="slide level0">

<h3>Specialization to CRRA (power utility)</h3>
<p>With one-period CRRA, <span class="math inline">\(u(C)=\tfrac{C^{1-\gamma}}{1-\gamma}\)</span>, <span class="math display">\[
M = \beta\,\Big(\frac{C_1}{C_0}\Big)^{-\gamma} \quad\Rightarrow\quad \log M = \log\beta - \gamma\,\Delta c,
\]</span> where <span class="math inline">\(\Delta c \equiv \log C_1 - \log C_0\)</span>. If <span class="math inline">\(\Delta c\)</span> is (approximately) normal with mean <span class="math inline">\(\mu_c\)</span> and variance <span class="math inline">\(\sigma_c^2\)</span>, then <span class="math display">\[
\log R_f \approx -\log\beta + \gamma\,\mu_c - \tfrac12\gamma^2\sigma_c^2.
\]</span> Approximation detail: <span class="math inline">\(\log M = \log\beta - \gamma\,\Delta c\)</span>. If <span class="math inline">\(\Delta c\sim\mathcal N(\mu_c,\sigma_c^2)\)</span> then <span class="math inline">\(\log M\)</span> is normal and the expression is exact; if not exactly normal, apply the second-order cumulant approximation in the previous bullet. Risk premia follow from <span class="math inline">\(\mathbb E[R]-R_f \approx -\dfrac{\operatorname{Cov}(M,R)}{\mathbb E[M]}\)</span> or, in logs, <span class="math display">\[
\mathbb E[r] \approx \log R_f \; -\; \operatorname{Cov}(\log M,\log R) \; -\; \tfrac12\operatorname{Var}(\log R).
\]</span> Approximation detail: from <span class="math inline">\(1=\mathbb E[e^{x+r}]\)</span> with <span class="math inline">\(x\equiv\log M\)</span>, use <span class="math inline">\(\log\mathbb E[e^{x+r}]\approx \mathbb E[x+r] + \tfrac12\operatorname{Var}(x+r)\)</span> (exact if <span class="math inline">\(x+r\)</span> is normal). Setting this to zero and solving for <span class="math inline">\(\mathbb E[r]\)</span> yields the expression above.</p>
<div class="financial-concept">
<p>Why this is useful: log-linearization converts nonlinear pricing conditions into linear relations among means, variances and covariances that are easy to interpret and calibrate.</p>
</div>
</section>
<section class="slide level0">

<h3>The risk-free rate puzzle (Weil, 1989)</h3>
<ul>
<li>Matching the equity premium with CRRA often requires high <span class="math inline">\(\gamma\)</span>, but then the model predicts too high <span class="math inline">\(\log R_f\)</span> via <span class="math inline">\(-\log\beta + \gamma\mu_c - \tfrac12\gamma^2\sigma_c^2\)</span>.</li>
<li>Conversely, matching the low observed <span class="math inline">\(R_f\)</span> calls for low <span class="math inline">\(\gamma\)</span> (or implausibly high <span class="math inline">\(\beta\)</span>), then the equity premium becomes too small.</li>
<li>This tension motivates enriched preferences or endowment risk, e.g., habit formation or disaster risk.</li>
</ul>
</section>
<section class="slide level0">

<h2>Simple Growth-Based Habit (one-period)</h2>
<p>We adopt a tractable specification where utility depends on current consumption and recent growth: <span class="math display">\[
u_t \;=\; \frac{1}{1-\gamma}\, C_t^{\,1-\gamma}\,\Big(\frac{C_{t-1}}{C_t}\Big)^{\kappa}
\;=\; \frac{1}{1-\gamma}\, C_t^{\,1-\gamma-\kappa}\,C_{t-1}^{\,\kappa},\qquad \gamma&gt;0,\;\kappa\ge 0.
\]</span> This penalizes low consumption relative to last period (a simple habit flavor) yet keeps closed-form expressions.</p>
</section>
<section class="slide level0">

<h3>SDF and pricing equation</h3>
<p>Marginal utility: <span class="math inline">\(\;u_C(C_t) = C_t^{-\gamma-\kappa}\,C_{t-1}^{\kappa}\)</span>. The one-period SDF is <span class="math display">\[
\boxed{\; M = \beta\,\frac{u_C(C_1)}{u_C(C_0)}
\;=\; \beta\,\Big(\frac{C_1}{C_0}\Big)^{-(\gamma+\kappa)} \times \underbrace{\Big(\frac{C_0}{C_{-1}}\Big)^{\kappa}}_{\text{known at }t=0}\;,\quad 1=\mathbb E[MR].\;}
\]</span> The known term can be absorbed in normalization, so the random part is <span class="math display">\[
\log M = \log\beta - (\gamma+\kappa)\,\Delta c,\qquad \Delta c \equiv \log C_1 - \log C_0.
\]</span></p>
</section>
<section class="slide level0">

<h3>Log-linearization and the risk-free rate</h3>
<p>If <span class="math inline">\(\Delta c \sim \mathcal N(\mu_c,\sigma_c^2)\)</span> (or is approximately normal): <span class="math display">\[
\boxed{\;\log R_f \approx -\log\beta + (\gamma+\kappa)\,\mu_c - \tfrac12(\gamma+\kappa)^2\,\sigma_c^2\; }.
\]</span> Approximation detail: the log-SDF is <span class="math inline">\(\log M = \log\beta - (\gamma+\kappa)\,\Delta c\)</span>, normal under the stated assumption (exact). Otherwise use the second-order cumulant approximation for <span class="math inline">\(-\log\mathbb E[M]\)</span>. Risk premia (levels or logs) follow the usual covariance rules with <span class="math inline">\(\log M\)</span>; habit simply shifts the effective sensitivity from <span class="math inline">\(\gamma\)</span> to <span class="math inline">\(\gamma+\kappa\)</span>.</p>
</section>
<section class="slide level0">

<h3>Why this helps</h3>
<ul>
<li>With <span class="math inline">\(\kappa&gt;0\)</span>, the SDF is more cyclical (responds more to <span class="math inline">\(\Delta c\)</span>): larger premia for a given <span class="math inline">\(\gamma\)</span>.</li>
<li>The extra parameter <span class="math inline">\(\kappa\)</span> lets us jointly fit a low <span class="math inline">\(R_f\)</span> and sizable premia without resorting to extreme <span class="math inline">\(\gamma\)</span>.</li>
<li>Still keeps the same clean log-linear formulas.</li>
</ul>
</section>
<section class="slide level0">

<h2>Rare Disasters: A Simple Model based on Barro (2006)</h2>
<ul>
<li>Rietz (1988) — “The Equity Risk Premium: A Solution.” Journal of Monetary Economics</li>
<li>Robert J. Barro (2006) — “Rare Disasters and Asset Markets in the Twentieth Century.” The Quarterly Journal of Economics,</li>
</ul>
<p>We add low-probability, high-severity consumption drops to study their impact on policy and prices.</p>
<h3>Setup</h3>
<ul>
<li><p>CRRA agent with SDF <span class="math inline">\(M = \beta (C_1/C_0)^{-\gamma}\)</span>.</p></li>
<li><p>Consumption growth with rare disasters (Barro-style): <span class="math display">\[
\Delta c = \mu_c + \sigma_c\,\varepsilon - J D,\quad \varepsilon\sim\mathcal N(0,1),\; D\sim\text{Bernoulli}(p),\; J&gt;0,\; p\ll 1.
\]</span> With probability <span class="math inline">\(p\)</span>, a disaster reduces consumption growth by <span class="math inline">\(J\)</span> and overall consumption by by a fraction <span class="math inline">\(1-e^{-J}\)</span>.</p></li>
<li><p>Rare disasters can be thought as any large negative shock to consumption that is rare</p>
<ul>
<li>Famines</li>
<li>Wars</li>
<li>Pandemics</li>
<li>Financial crises</li>
<li>Natural disasters</li>
</ul></li>
</ul>
</section>
<section class="slide level0">

<h3>Assumptions and timing</h3>
<ul>
<li>One-period, representative agent, CRRA preferences: <span class="math inline">\(u(C)=\tfrac{C^{1-\gamma}}{1-\gamma}\)</span>, <span class="math inline">\(\gamma&gt;0\)</span>.</li>
<li>Endowment economy: aggregate consumption equals the endowment; investors trade Arrow-Debreu or assets with payoffs at <span class="math inline">\(t=1\)</span>.</li>
<li>Information/timing: at <span class="math inline">\(t=0\)</span> choose portfolios, at <span class="math inline">\(t=1\)</span> shocks <span class="math inline">\((\varepsilon, D)\)</span> realize and payoffs are delivered.</li>
<li>SDF from marginal rate of substitution: <span class="math display">\[\boxed{\;M \;=\; \beta\,\Big(\tfrac{C_1}{C_0}\Big)^{-\gamma}\;}.\]</span></li>
<li>The exponential properties of the CRRA utility allows us to separate the normal and jump parts of <span class="math inline">\(\Delta c\)</span> in a tractable way.</li>
</ul>
</section>
<section class="slide level0">

<h3>Optimization and Euler equations</h3>
<ul>
<li>Since the SDF depends on aggregate consumption, and consumption growth is exogenous we don’t need to setup a maximization program. We just need to understand the risk free and risky asset dynamics.</li>
</ul>
<p><span class="math display">\[
\begin{align}
\mathbb{E}[M] &amp;= \mathbb{E}[\beta \Big( \frac{C_1}{C_0} \Big)^{-\gamma}] \\
&amp;= \mathbb{E}[\beta e^{-\gamma \Delta c}] \\
&amp;= \beta \mathbb{E}[e^{-\gamma(\mu_c + \sigma_c \varepsilon - J D)}] \\
&amp;= \beta e^{-\gamma \mu_c} \mathbb{E}[e^{-\gamma \sigma_c \varepsilon}] \mathbb{E}[e^{\gamma J D}] \text{  Independence}\\
&amp;= \beta e^{-\gamma \mu_c + \frac{1}{2} \gamma^2 \sigma_c^2} \big[(1-p) + p e^{\gamma J}\big]
\end{align}
\]</span> If <span class="math inline">\(R_f = 1/\mathbb{E}[M]\)</span> then we can compute the risk free rate in logs as <span class="math display">\[
\log R_f = r_f = -\log\beta + \gamma\mu_c - \tfrac12\gamma^2\sigma_c^2 - \log\big[(1-p) + p\,e^{\gamma J}\big].
\]</span></p>
<p>A reasonable <span class="math inline">\(p\)</span> and large consumption drop <span class="math inline">\(J\)</span> can generate a lower risk free rate.</p>
</section>
<section class="slide level0">

<h3>Pricing assets with disaster exposure</h3>
<ul>
<li>To study risk premia we need to model how returns and consumption growth are related.</li>
<li>Consider an asset with log return <span class="math inline">\(r \equiv \log R\)</span> that loads linearly on consumption growth: <span class="math display">\[\boxed{\; r = a + k\,\Delta c + \eta,\;\; \eta\perp (\varepsilon,D),\; \eta\sim\mathcal N(0, s^2).\;}\]</span> The parameter <span class="math inline">\(k\)</span> captures exposure to consumption risk and to disasters through <span class="math inline">\(\Delta c\)</span>.</li>
<li>Pricing condition in logs uses the Normal–Bernoulli mixture: $$ <span class="math display">\[\begin{align*}
1 &amp;= \mathbb{E}[M R] = \mathbb{E}\!\big[e^{\log M + \log R}\big]
    = \mathbb{E}\!\big[e^{m + r}\big] \\[4pt]
&amp; \text{with } m = \log M = \log\beta - \gamma \Delta c,\quad
    r = a + k \Delta c + \eta \\[4pt]
m + r &amp;= (\log\beta - \gamma \Delta c) + (a + k \Delta c + \eta)
    = \log\beta + a + (k-\gamma)\Delta c + \eta \\[4pt]
\Delta c &amp;= \mu_c + \sigma_c \varepsilon - J D \\[4pt]
\Rightarrow\quad
m + r &amp;= \log\beta + a + (k-\gamma)(\mu_c + \sigma_c \varepsilon - J D) + \eta \\[4pt]
&amp;= \underbrace{\log\beta + a + (k-\gamma)\mu_c}_{\text{constant}}
   \;+\; (k-\gamma)\sigma_c \varepsilon
   \;-\; (k-\gamma)J D
   \;+\; \eta \\[6pt]
\end{align*}\]</span></li>
</ul>
</section>
<section class="slide level0">

<h3>Pricing assets with disaster exposure (cont’d)</h3>
<p><span class="math display">\[
\begin{align*}
\text{Independence } &amp;(\varepsilon, D, \eta) \ \Longrightarrow \
\mathbb{E}\!\big[e^{m+r}\big]
   = e^{\log\beta + a + (k-\gamma)\mu_c}
     \;\mathbb{E}\!\big[e^{(k-\gamma)\sigma_c \varepsilon + \eta}\big]
     \;\mathbb{E}\!\big[e^{-(k-\gamma)J D}\big] \\[6pt]
\text{Normal part: } &amp; (k-\gamma)\sigma_c \varepsilon + \eta
   \sim \mathcal N\!\Big(0,\ (k-\gamma)^2\sigma_c^2 + s^2\Big) \\[4pt]
\Rightarrow\quad
\mathbb{E}\!\big[e^{(k-\gamma)\sigma_c \varepsilon + \eta}\big]
  &amp;= \exp\!\Big(\tfrac12\big[(k-\gamma)^2\sigma_c^2 + s^2\big]\Big) \\[6pt]
\text{Bernoulli part: }&amp;
\mathbb{E}\!\big[e^{-(k-\gamma)J D}\big]
  = (1-p)\,e^{0} + p\,e^{-(k-\gamma)J}
  = (1-p)+p e^{-(k-\gamma)J} \\[6pt]
\therefore\quad
1 &amp;= e^{\log\beta + a + (k-\gamma)\mu_c}
      \exp\!\Big(\tfrac12\big[(k-\gamma)^2\sigma_c^2 + s^2\big]\Big)
      \big[(1-p)+p e^{-(k-\gamma)J}\big] \\[8pt]
0 &amp;= \log\beta + a + (k-\gamma)\mu_c
      + \tfrac12\big[(k-\gamma)^2\sigma_c^2 + s^2\big]
      + \log\big[(1-p)+p e^{-(k-\gamma)J}\big] \\[8pt]
\Longrightarrow\quad
a &amp;= -\log\beta
     -(k-\gamma)\mu_c
     - \tfrac12\big[(k-\gamma)^2\sigma_c^2 + s^2\big]
     - \log\big[(1-p)+p e^{-(k-\gamma)J}\big].
\end{align*}
\]</span> Taking logs of both sides (RHS is positive) and rearranging to isolate <span class="math inline">\(a\)</span>: <span class="math display">\[
\begin{aligned}
0
&amp;= \log\beta + a + (k-\gamma)\mu_c + \tfrac12\big[(k-\gamma)^2\sigma_c^2 + s^2\big]
  + \log\big[(1-p)+p\,e^{-(k-\gamma)J}\big] \\
\Longrightarrow\quad
a
&amp;= -\log\beta -(k-\gamma)\mu_c - \tfrac12\big[(k-\gamma)^2\sigma_c^2 + s^2\big]
  - \log\big[(1-p)+p\,e^{-(k-\gamma)J}\big].
\end{aligned}
\]</span> Hence the pricing-implied intercept is <span class="math display">\[
\boxed{\; a
= -\log\beta -(k-\gamma)\mu_c - \tfrac12\big[(k-\gamma)^2\sigma_c^2 + s^2\big]
  - \log\big[(1-p)+p\,e^{-(k-\gamma)J}\big].\;}
\]</span></p>
</section>
<section class="slide level0">

<h2>Risk Premium under Rare Disasters</h2>
<p>We now subtract the (log) risk‑free rate <span class="math inline">\(r_f = \log R_f\)</span> from the expected (log) return to expose parameter effects on the risk premium.</p>
<h3>Expected log return</h3>
<p>With <span class="math inline">\(r = a + k\Delta c + \eta\)</span>, <span class="math inline">\(\Delta c = \mu_c + \sigma_c\varepsilon - J D\)</span>, <span class="math inline">\(\eta\sim\mathcal N(0,s^2)\)</span> and <span class="math inline">\(\mathbb E[\Delta c]=\mu_c - pJ\)</span>: <span class="math display">\[
\begin{align*}
\mathbb E[r]
&amp;= a + k(\mu_c - pJ) + \tfrac12 k^2\sigma_c^2 + \tfrac12 s^2 \\
&amp;= -\log\beta -(k-\gamma)\mu_c - \tfrac12\big[(k-\gamma)^2\sigma_c^2 + s^2\big] - \log\big[(1-p)+p e^{-(k-\gamma)J}\big] \\
&amp;\qquad + k(\mu_c - pJ) + \tfrac12 k^2\sigma_c^2 + \tfrac12 s^2 \\
&amp;= -\log\beta + \gamma\mu_c + k\gamma\sigma_c^2 - k p J - \log\big[(1-p)+p e^{-(k-\gamma)J}\big].
\end{align*}
\]</span></p>
<h3>Log risk‑free rate</h3>
<p>Previously derived: <span class="math display">\[
r_f = -\log\beta + \gamma\mu_c - \tfrac12\gamma^2\sigma_c^2 - \log\big[(1-p)+p e^{\gamma J}\big].
\]</span></p>
<h3>Exact log risk premium</h3>
<p>Subtracting yields <span class="math display">\[
\boxed{\;\mathbb E[r]-r_f = k\gamma\sigma_c^2 - k p J + \log\frac{(1-p)+p e^{\gamma J}}{(1-p)+p e^{-(k-\gamma)J}}\; }.
\]</span></p>
</section>
<section class="slide level0">

<h2>Rare / small-disaster approximation</h2>
<p>If <span class="math inline">\(p\)</span> is small, <span class="math inline">\(\log[(1-p)+p e^{\alpha}] \approx p(e^{\alpha}-1)\)</span> so <span class="math display">\[
\mathbb E[r]-r_f \approx k\gamma\sigma_c^2 - k p J + p\big(e^{\gamma J} - e^{-(k-\gamma)J}\big).
\]</span></p>
<p>Approximation detail (why <span class="math inline">\(\log[(1-p)+p e^{\alpha}] \approx p(e^{\alpha}-1)\)</span>):</p>
<p><span class="math display">\[
\log\big[(1-p)+p e^{\alpha}\big]
= \log\big(1 - p + p e^{\alpha}\big)
= \log\Big(1 + p(e^{\alpha}-1)\Big).
\]</span> Let <span class="math inline">\(x \equiv p(e^{\alpha}-1)\)</span>. For fixed <span class="math inline">\(\alpha\)</span>, small <span class="math inline">\(p\)</span> implies <span class="math inline">\(|x|\)</span> small. Use the Taylor series <span class="math inline">\(\log(1+x) = x - \tfrac12 x^2 + \tfrac13 x^3 - \cdots\)</span> to obtain the first-order (in <span class="math inline">\(p\)</span>) approximation: <span class="math display">\[
\log\big[(1-p)+p e^{\alpha}\big] \approx p(e^{\alpha}-1), \qquad \text{error } = \mathcal O\!\big(p^2 (e^{\alpha}-1)^2\big).
\]</span> If additionally <span class="math inline">\(\alpha\)</span> is small, <span class="math inline">\(e^{\alpha}-1 \approx \alpha + \tfrac12\alpha^2\)</span>, yielding <span class="math display">\[
\log\big[(1-p)+p e^{\alpha}\big] \approx p\alpha + \tfrac12 p\alpha^2.
\]</span> Retaining only the linear term in <span class="math inline">\(p\)</span> (and optionally the leading terms in <span class="math inline">\(\alpha\)</span>) delivers the expression used above.</p>
</section>
<section class="slide level0">

<h3>Parameter sensitivities</h3>
<ul>
<li>Diffusive term <span class="math inline">\(k\gamma\sigma_c^2\)</span>: higher exposure <span class="math inline">\(k\)</span>, risk aversion <span class="math inline">\(\gamma\)</span>, or volatility <span class="math inline">\(\sigma_c\)</span> raise premia.</li>
<li>Disaster drag <span class="math inline">\(-k p J\)</span>: procyclical assets (<span class="math inline">\(k&gt;0\)</span>) lose more in disasters, requiring higher compensation.</li>
<li>Jump convexity <span class="math inline">\(\log\frac{(1-p)+p e^{\gamma J}}{(1-p)+p e^{-(k-\gamma)J}}\)</span>: amplifies premia when <span class="math inline">\((p,J)\)</span> or the mismatch <span class="math inline">\((k-\gamma)\)</span> grow.</li>
<li>Calibration leverage: <span class="math inline">\((p,J)\)</span> allow matching large premia without implausibly large <span class="math inline">\(\gamma\)</span>; small <span class="math inline">\(p\)</span> with sizable <span class="math inline">\(J\)</span> can materially boost premia.</li>
<li>Cross-section: varying <span class="math inline">\(k\)</span> maps differential disaster and diffusion exposure into heterogeneous premia; hedging assets (low/negative <span class="math inline">\(k\)</span>) earn low premia.</li>
</ul>
</section>
<section class="slide level0">

<h2>Risk Premia under Habit</h2>
<h3>Campbell–Cochrane Habit: Setup and SDF</h3>
<ul>
<li>Campbell and Cochrane (1999) — “By Force of Habit: A Consumption-Based Explanation of Aggregate Stock Market Behavior.” Journal of Political Economy</li>
<li>Preferences feature external habit <span class="math inline">\(X_t\)</span> and surplus consumption ratio <span class="math inline">\(S_t \equiv \dfrac{C_t - X_t}{C_t} \in (0,1)\)</span>.</li>
<li>Utility is time-separable CRRA over surplus consumption: <span class="math inline">\(u(C_t, X_t) = \dfrac{(C_t - X_t)^{1-\gamma}}{1-\gamma} = \dfrac{\big(S_t C_t\big)^{1-\gamma}}{1-\gamma}\)</span>, with <span class="math inline">\(\gamma&gt;0\)</span>.</li>
<li>Intertemporal marginal rate of substitution (one-period SDF): <span class="math display">\[M_{t+1} = \beta\,\left(\frac{S_{t+1} C_{t+1}}{S_t C_t}\right)^{-\gamma} = \beta\,\left(\frac{C_{t+1}}{C_t}\right)^{-\gamma}\,\left(\frac{S_{t+1}}{S_t}\right)^{-\gamma}.\]</span></li>
<li>Log form: <span class="math inline">\(\log M_{t+1} = \log\beta - \gamma\,\Delta c_{t+1} - \gamma\,\Delta s_{t+1}\)</span> with <span class="math inline">\(\Delta c_{t+1} \equiv \log(C_{t+1}/C_t)\)</span> and <span class="math inline">\(\Delta s_{t+1} \equiv \log(S_{t+1}/S_t)\)</span>.</li>
<li>Key idea: choose <span class="math inline">\(S_t\)</span> dynamics so that risk premia vary strongly with the business cycle while keeping a smooth risk-free rate.</li>
</ul>
</section>
<section class="slide level0">

<h2>Habit Dynamics and Surplus Ratio Law of Motion</h2>
<ul>
<li>Let consumption growth be i.i.d. normal: <span class="math inline">\(\Delta c_{t+1} = g + \sigma_c \varepsilon_{t+1}\)</span>, <span class="math inline">\(\varepsilon\sim \mathcal N(0,1)\)</span>.</li>
<li>Surplus ratio follows: <span class="math inline">\(\log S_{t+1} - \log S_t = \Delta s_{t+1} = \phi\,(\bar s - s_t) + \lambda\,\sigma_c\,\varepsilon_{t+1}\)</span> (mean reversion plus sensitivity), with <span class="math inline">\(\phi\in(0,1)\)</span>.</li>
<li>In levels, an equivalent approximation: <span class="math inline">\(S_{t+1} = S_t^{1-\phi}\,e^{\phi \bar s + \lambda \sigma_c \varepsilon_{t+1}}\)</span>.</li>
<li>State dependence: when <span class="math inline">\(S_t\)</span> is low (habit close to consumption), marginal utility is very sensitive; risk premia rise in recessions.</li>
<li>Calibration pins <span class="math inline">\(\lambda\)</span> to damp the risk-free rate volatility: set <span class="math inline">\(\lambda\)</span> to offset the consumption term in <span class="math inline">\(\log R_{f,t}\)</span> (see next slide).</li>
</ul>
</section>
<section class="slide level0">

<h2>Risk-Free Rate Derivation and Smoothness Condition</h2>
<ul>
<li>Definition: <span class="math inline">\(R_{f,t}^{-1} = \mathbb E_t[M_{t+1}]\)</span>.</li>
<li>Use lognormality conditional on <span class="math inline">\(S_t\)</span>: write <span class="math inline">\(x_{t+1} \equiv \log M_{t+1} = \log\beta - \gamma\,\Delta c_{t+1} - \gamma\,\Delta s_{t+1}\)</span>.</li>
<li>With <span class="math inline">\(\Delta c_{t+1} = g + \sigma_c\varepsilon_{t+1}\)</span> and <span class="math inline">\(\Delta s_{t+1} = \phi(\bar s - \log S_t) + \lambda\sigma_c\varepsilon_{t+1}\)</span>: <span class="math display">\[x_{t+1} = \log\beta - \gamma\,g - \gamma\,\phi(\bar s - s_t) - \gamma(1+\lambda)\sigma_c\,\varepsilon_{t+1}.\]</span></li>
<li>Then <span class="math inline">\(\mathbb E_t[M_{t+1}] = \exp\big(\mathbb E_t[x_{t+1}] + \tfrac12\operatorname{Var}_t(x_{t+1})\big)\)</span> gives <span class="math display">\[\log R_{f,t} = -\log\beta + \gamma g + \gamma\,\phi(\bar s - s_t) - \tfrac12\gamma^2(1+\lambda)^2\sigma_c^2.\]</span></li>
<li>Smooth <span class="math inline">\(R_f\)</span>: choose <span class="math inline">\(\lambda\)</span> so <span class="math inline">\(\gamma\,\phi(\bar s - s_t)\)</span> variation is minimized; in CC (1999) <span class="math inline">\(\lambda\)</span> is set to cancel shocks so <span class="math inline">\(R_{f,t}\)</span> is nearly constant.</li>
</ul>
</section>
<section class="slide level0">

<h2>Risk Premia and Time-Varying Price of Risk (General Case)</h2>
<ul>
<li>Derivation (log form): start from <span class="math inline">\(1 = \mathbb E_t[M_{t+1} R_{i,t+1}]\)</span>. Write <span class="math inline">\(m_{t+1}=\log M_{t+1}\)</span> and <span class="math inline">\(r_{i,t+1}=\log R_{i,t+1}\)</span>. Then <span class="math display">\[0 = \log \mathbb E_t\big[e^{m_{t+1}+r_{i,t+1}}\big].\]</span> Apply a second-order (lognormal) approximation (exact if <span class="math inline">\(m_{t+1}+r_{i,t+1}\)</span> is conditionally normal): <span class="math display">\[0 \approx \mathbb E_t[m_{t+1}+r_{i,t+1}] + \tfrac12\operatorname{Var}_t(m_{t+1}+r_{i,t+1}).\]</span> Rearranging for the conditional expected log return gives <span class="math display">\[\mathbb E_t[r_{i,t+1}] \approx -\mathbb E_t[m_{t+1}] - \tfrac12\operatorname{Var}_t(m_{t+1}) - \tfrac12\operatorname{Var}_t(r_{i,t+1}) - \operatorname{Cov}_t(m_{t+1}, r_{i,t+1}).\]</span> Using <span class="math inline">\(\log R_{f,t} = -\log \mathbb E_t[M_{t+1}] \approx -\mathbb E_t[m_{t+1}] - \tfrac12\operatorname{Var}_t(m_{t+1})\)</span> we substitute and obtain the slide’s relation.</li>
<li>Pricing condition: <span class="math inline">\(1 = \mathbb E_t[M_{t+1} R_{i,t+1}]\)</span> and in logs <span class="math inline">\(\mathbb E_t[r_{i,t+1}] \approx \log R_{f,t} - \operatorname{Cov}_t(\log M_{t+1}, r_{i,t+1}) - \tfrac12\operatorname{Var}_t(r_{i,t+1})\)</span>.</li>
<li>Let asset <span class="math inline">\(i\)</span> have log return <span class="math inline">\(r_{i,t+1} = \mu_i + b_i\,\sigma_c\,\varepsilon_{t+1} + \eta_{i,t+1}\)</span> with <span class="math inline">\(\eta\)</span> idiosyncratic and independent.</li>
<li>Instantaneous market price of risk (per unit shock): <span class="math inline">\(\Lambda_t \equiv -\operatorname{Cov}_t(\log M_{t+1}, \varepsilon_{t+1}) = \gamma(1+\lambda)\sigma_c\)</span>.</li>
<li>Expected excess log return: with <span class="math inline">\(\operatorname{Var}_t(r_{i,t+1}) = b_i^2\sigma_c^2 + s_i^2\)</span> (define <span class="math inline">\(s_i^2\equiv\operatorname{Var}(\eta_{i,t+1})\)</span>), <span class="math display">\[\mathbb E_t[r_{i,t+1}] - \log R_{f,t} \approx b_i\,\Lambda_t\,\sigma_c - \tfrac12\big(b_i^2\sigma_c^2 + s_i^2\big).\]</span> Equivalently, <span class="math display">\[\mathbb E_t[r_{i,t+1}] \approx \log R_{f,t} + b_i\gamma(1+\lambda)\sigma_c^2 - \tfrac12 b_i^2\sigma_c^2 - \tfrac12 s_i^2.\]</span></li>
</ul>
</section>
<section class="slide level0">

<h2>Implementing the CC Calibration Logic</h2>
<ul>
<li>Choose <span class="math inline">\((\gamma, \sigma_c, g)\)</span> from consumption data; select <span class="math inline">\(\beta\)</span> to match average <span class="math inline">\(R_f\)</span>.</li>
<li>Pick target average surplus <span class="math inline">\(\bar S\)</span> (or <span class="math inline">\(\bar s=\log \bar S\)</span>) so that unconditional <span class="math inline">\(S_t\)</span> stays comfortably in <span class="math inline">\((0,1)\)</span>.</li>
<li>Set mean reversion <span class="math inline">\(\phi\)</span> to target realistic persistence in the surplus ratio and hence in expected returns.</li>
<li>Determine <span class="math inline">\(\lambda(S_t)\)</span> to stabilize <span class="math inline">\(\log R_{f,t}\)</span>: e.g., make <span class="math inline">\((1+\lambda(S_t))\)</span> decline when <span class="math inline">\(S_t\)</span> falls, offsetting shocks in <span class="math inline">\(\Delta c\)</span>.</li>
<li>Verify implications: countercyclical Sharpe ratios, high unconditional equity premium, low and smooth <span class="math inline">\(R_f\)</span>, and realistic consumption–asset correlations.</li>
</ul>


</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p>Asset Pricing Theory - Binary Trees and Consumption Based Asset Pricing</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': false,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/jfimbet\.github\.io\/AssetPricingTheory");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>